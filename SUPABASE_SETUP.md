# Supabase Setup Instructions

Follow these steps to deploy your PM Research Notes app with Supabase.

## Step 1: Create Supabase Account

1. Go to [supabase.com](https://supabase.com)
2. Click "Start your project"
3. Sign up with GitHub (recommended) or email
4. Free tier includes: 500MB database, 1GB file storage, 2GB bandwidth/month

## Step 2: Create New Project

1. Click "New Project"
2. Choose organization (create one if needed)
3. Enter project details:
   - **Name**: pm-research-notes (or your choice)
   - **Database Password**: Generate a strong password (save it somewhere safe)
   - **Region**: Choose closest to you
4. Click "Create new project"
5. Wait 1-2 minutes for setup to complete

## Step 3: Create Database Table

1. In your Supabase project, go to **SQL Editor** (left sidebar)
2. Click "New query"
3. Paste this SQL code:

```sql
-- Create notes table
create table notes (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  category text not null,
  title text not null,
  content text not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Enable Row Level Security (RLS)
alter table notes enable row level security;

-- Policy: Users can only see their own notes
create policy "Users can view their own notes"
  on notes for select
  using (auth.uid() = user_id);

-- Policy: Users can insert their own notes
create policy "Users can insert their own notes"
  on notes for insert
  with check (auth.uid() = user_id);

-- Policy: Users can delete their own notes
create policy "Users can delete their own notes"
  on notes for delete
  using (auth.uid() = user_id);
```

4. Click "Run" (bottom right)
5. You should see "Success. No rows returned"

## Step 4: Get Your API Credentials

1. Go to **Project Settings** (gear icon in left sidebar)
2. Click **API** in the left menu
3. You'll see two important values:
   - **Project URL** (looks like: `https://xxxxx.supabase.co`)
   - **anon public** key (long string under "Project API keys")

## Step 5: Configure Your HTML File

1. Open `research-notes-supabase.html`
2. Find these lines near the top of the `<script>` section:

```javascript
const SUPABASE_URL = 'YOUR_SUPABASE_URL';
const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY';
```

3. Replace with your actual values:

```javascript
const SUPABASE_URL = 'https://xxxxx.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGc...your-long-key-here';
```

## Step 6: Test Locally

1. Open `research-notes-supabase.html` in your browser
2. Click "Don't have an account? Sign up"
3. Enter email and password (at least 6 characters)
4. Check your email for verification link (check spam folder)
5. Click verification link
6. Return to app and sign in
7. Add a test note

## Step 7: Deploy to the Internet

### Option A: Netlify (Easiest)

1. Go to [netlify.com](https://netlify.com)
2. Sign up/log in
3. Drag and drop `research-notes-supabase.html` into the upload area
4. Rename the file to `index.html` if prompted
5. Get your live URL (e.g., `random-name-12345.netlify.app`)

### Option B: Vercel

1. Go to [vercel.com](https://vercel.com)
2. Sign up/log in
3. Click "Add New" → "Project"
4. Upload your file (rename to `index.html`)
5. Deploy

### Option C: GitHub Pages

1. Create GitHub account if needed
2. Create new repository named `pm-research-notes`
3. Upload `research-notes-supabase.html` (rename to `index.html`)
4. Go to Settings → Pages
5. Enable Pages from main branch
6. Your site will be at `username.github.io/pm-research-notes`

## Security Notes

- The anon key is safe to expose in frontend code
- Row Level Security (RLS) ensures users only see their own notes
- Supabase handles password hashing automatically
- Email verification is enabled by default

## Troubleshooting

**"Failed to load notes"**
- Check browser console for errors (F12)
- Verify your SUPABASE_URL and SUPABASE_ANON_KEY are correct
- Make sure you ran the SQL to create the table

**"Invalid login credentials"**
- Did you verify your email?
- Check spam folder for verification email
- Password must be at least 6 characters

**Can't sign up**
- Email verification is required
- Check Supabase Auth settings if emails aren't sending
- Go to Authentication → Providers → Email → Enable

**Notes not saving**
- Check browser console for errors
- Verify RLS policies were created correctly
- Make sure you're signed in

## Next Steps

- Customize the categories for your specific research
- Add tags or additional fields to notes
- Implement search functionality
- Export notes to PDF or CSV
- Share access with teammates

## Cost

Free tier limits:
- 50,000 monthly active users
- 500MB database space
- 1GB file storage
- 2GB bandwidth

This is plenty for personal use or small teams. Paid plans start at $25/month if you exceed these limits.
